<div class="chat-container">
  <!-- Header -->
  <div class="chat-sidebar">
    <div class="sidebar-content">
      <h1><i class="icon-robot">ü§ñ</i>AI Assistant</h1>
    </div>
  </div>

  <!-- Messages -->
  <div class="flex flex-col flex-1">
    <div class="chat-header">
      <h1>Ollama Chat</h1>
      <div class="model-info">
        Model: <span class="model-name">{{ getModelInfo(selectedModel).label }}</span>
      </div>
    </div>

    <div class="chat-messages" #messagesContainer>
      <div
        *ngFor="let message of messages"
        class="message"
        [ngClass]="'message-' + message.sender"
      >
        <div class="message-content">
          <div class="content">
            {{ message.content }}
            <div *ngIf="message.isStreaming" class="streaming-indicator">
              <span class="dot"></span>
              <span class="dot"></span>
              <span class="dot"></span>
            </div>
          </div>
          <div class="message-time">
            {{ message.timestamp | date:'HH:mm' }}
          </div>
        </div>
      </div>

      <!-- Typing Indicator -->
      <div *ngIf="isLoading && !isStreaming" class="message message-ai">
        <div class="message-content">
          <div class="content typing-indicator">
            <div class="typing-dots">
              <span></span>
              <span></span>
              <span></span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="chat-input">
      <div class="controls-bar">
        <div class="control-group">
          <!-- <select
            [(ngModel)]="selectedModel"
            class="model-select"
            [disabled]="isLoading"
          >
            <option
              *ngFor="let model of models"
              [value]="model.value"
            >
              {{ model.label }}
            </option>
          </select> -->

          <button
            class="control-btn"
            [class.active]="isStreaming"
            (click)="toggleStreaming()"
            [disabled]="isLoading"
            title="Toggle streaming mode"
          >
            <i class="icon">{{ isStreaming ? '‚ö°' : 'üìù' }}</i>
            {{ isStreaming ? 'Stream' : 'Normal' }}
          </button>

          <button
            class="control-btn"
            (click)="clearChat()"
            [disabled]="isLoading"
            title="Clear chat history"
          >
            <i class="icon">üóëÔ∏è</i>
            X√≥a
          </button>
        </div>
      </div>

      <!-- Input Group -->
      <div class="input-group">
        <div class="input-wrapper">
          <textarea
            #messageInput
            [(ngModel)]="currentMessage"
            (keypress)="onKeyPress($event)"
            class="message-input"
            placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n... (Enter ƒë·ªÉ g·ª≠i, Shift+Enter ƒë·ªÉ xu·ªëng d√≤ng)"
            rows="1"
            maxlength="1000"
            [disabled]="isLoading"
          ></textarea>

          <button
            class="send-btn"
            (click)="sendMessage()"
            [disabled]="!currentMessage.trim() || isLoading"
            [class.loading]="isLoading"
          >
            <span *ngIf="!isLoading" class="send-icon">üì§</span>
            <span *ngIf="isLoading" class="loading-spinner">‚è≥</span>
            {{ isLoading ? 'ƒêang g·ª≠i...' : 'G·ª≠i' }}
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
